<ngx-loading [show]="loading" [config]="{ fullScreenBackdrop: true }"></ngx-loading>
<div class="container">
  
</div>
<div class="animated fadeIn">
  <div class="card">
    <div class="card-body">
      <!-- Start Busqueda Superior -->
      <div class="row mb-3">
        <div class="col-lg-9">
          <div class="row">

            <!-- busqueda rango fechas -->
            <div class="col-lg-3 mb-1 invalid--no-color">
              <mat-form-field class="input-full-width">
                <input matInput type="text" [(ngModel)]="rangoFechaSearch" #fechaSearch bsDaterangepicker [bsConfig]="{ rangeInputFormat : 'DD-MM-YYYY' }" placement="right top" class="rangoFecha" placeholder="Rango de Fecha">
              </mat-form-field>
            </div>

            <!-- busqueda modulo -->
            <div class="col-lg-3 mb-1">
              <mat-form-field class="input-full-width">
                <mat-select [(ngModel)]="busquedaBit.Modulo" placeholder="Módulo" #singleSelect>
                  <mat-option>                      
                    <ngx-mat-select-search [(ngModel)]="moduloSearch" [placeholderLabel]="'Buscar'" [noEntriesFoundLabel]="'No hay coincidencias'"></ngx-mat-select-search>
                  </mat-option>
                  <mat-option [value]="">Ninguno</mat-option>                    
                  <mat-option *ngFor="let option of modulosGet | filterSelectSingle: moduloSearch" [value]="option"> 
                    {{option}}
                  </mat-option>
                </mat-select>                  
              </mat-form-field>
            </div>

            <!-- busqueda usuario -->
            <div class="col-lg-3 mb-1">
              <mat-form-field class="input-full-width">
                <mat-select [(ngModel)]="busquedaBit.IdCuentaEspecifica" class="" placeholder="Usuario" #singleSelect>
                  <mat-option>                      
                    <ngx-mat-select-search [(ngModel)]="usuarioSearch" [placeholderLabel]="'Buscar'" [noEntriesFoundLabel]="'No hay coincidencias'"></ngx-mat-select-search>
                  </mat-option>
                  <mat-option [value]="">Ninguno</mat-option>                    
                  <mat-option *ngFor="let option of usuariosGet | filterSelect: usuarioSearch" [value]="option['IdCliente']"> 
                    {{option['Nombre']}}
                  </mat-option>
                </mat-select>                  
              </mat-form-field>
            </div>
          </div>
          <!-- end row -->
        </div>

        <div class="col-lg-3">
          <div class="row justify-content-center">
            <div class="col-xs-6 col-sm-6 col-md-12 col-lg-12 col-xl-5 mb-1 pr-0 align-self-end">
              <button (click)="buscarBitacoras()" class="btn btn-pill btn-primary btn-sm"> <i class="fas fa-search"></i> Buscar</button>
            </div>
            <div class="col-xs-6 col-sm-6 col-md-12 col-lg-12 col-xl-7 mb-1 pl-0 align-self-start">              
              <button (click)="limpiarFlitros()" class="btn btn-pill btn-primary btn-sm"> Nueva Busqueda</button>
            </div>
          </div>
        </div>    
      </div>      
      <!-- End Busqueda Superior -->
      <div class="table-responsive">
        <table mat-table [dataSource]="dataSource" matSort>

          <!-- Usuario Column -->
          <ng-container matColumnDef="Nombre">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Usuario </th>
            <td mat-cell *matCellDef="let element"> {{ element.Nombre }} </td>
          </ng-container>

          <!-- Acciones Column -->
          <ng-container matColumnDef="Accion">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Acciones de uso</th>
            <td mat-cell *matCellDef="let element"> {{ element.Accion }} </td>
          </ng-container>

          <!-- Detalles Column -->
          <ng-container matColumnDef="Detalle">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Detalles de acción </th>
            <td mat-cell *matCellDef="let element"> {{ element.Detalle }} </td>
          </ng-container>

          <!-- fecha Column -->
          <ng-container matColumnDef="Fecha">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Fecha de Acción</th>
            <td mat-cell *matCellDef="let element"> {{ element.FechaCreacion.split(' ')[0]  }} </td>
          </ng-container>

           <!-- Hora Column -->
           <ng-container matColumnDef="Hora">
            <th mat-header-cell *matHeaderCellDef> Hora de acceso </th>
            <td mat-cell *matCellDef="let element"> {{ element.FechaCreacion.split(' ')[1] }} </td>
          </ng-container>


          <tr mat-header-row *matHeaderRowDef="displayedColumns" ></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
        <mat-paginator [length]="100"
                       [pageSize]="10"
                       [pageSizeOptions]="[5, 10, 25, 100]">
        </mat-paginator>
      </div>
    </div>
  </div>
</div>
